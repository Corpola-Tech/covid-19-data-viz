(this.webpackJsonpcovid=this.webpackJsonpcovid||[]).push([[0],{166:function(t,e,n){},173:function(t,e){},175:function(t,e){},186:function(t,e){},188:function(t,e){},214:function(t,e){},216:function(t,e){},217:function(t,e){},222:function(t,e){},224:function(t,e){},243:function(t,e){},255:function(t,e){},258:function(t,e){},271:function(t,e,n){"use strict";n.r(e);var o=n(3),r=n.n(o),c=n(69),i=n.n(c),a=(n(166),n(10)),s=n(41),u=n(4),l=n(70),d=function(){var t=Object(o.useState)(null),e=Object(a.a)(t,2),n=e[0],r=e[1],c=Object(o.useState)(null),i=Object(a.a)(c,2),s=i[0],l=i[1];return null===s&&null!==n&&l(function(t){if(t)return t.map((function(t){var e=[parseFloat(t.Long),parseFloat(t.Lat)];return Object.keys(t).slice(4).map((function(n,o){return{"Location Coordinates":"".concat(e[1],", ").concat(e[0]),"Reported Date":new Date(n),"Total Confirmed":Number(t[n])-(0===o?0:Number(t[Object.keys(t).slice(4)[o-1]]))<0?0:Number(t[n])-(0===o?0:Number(t[Object.keys(t).slice(4)[o-1]])),coords:e}}))})).flat(1)}(n)),Object(o.useEffect)((function(){Object(u.b)("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv").then(r)}),[]),s},f=n(0),j=Object(u.e)(),b=Object(u.g)(j),m=Object(u.f)(),h=n(87).country_reverse_geocoding(),O=function(t){var e=t.worldAtlas,n=e.land,r=e.interiors,c=t.data,i=t.sizeScale,s=t.sizeValue,u=t.setTooltip;return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("g",{className:"marks",children:[Object(o.useMemo)((function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("path",{className:"sphere",d:b({type:"Sphere"})}),Object(f.jsx)("path",{className:"graticules",d:b(m())}),n.features.map((function(t){return Object(f.jsx)("path",{className:"land",d:b(t)})})),Object(f.jsx)("path",{className:"interiors",d:b(r)})]})}),[b,m,n,r]),Object(o.useMemo)((function(){return c.map((function(t){var e=j(t.coords),n=Object(a.a)(e,2),o=n[0],r=n[1];return Object(f.jsx)("circle",{style:{cursor:"pointer"},cx:o,cy:r,r:i(s(t)),onMouseMove:function(e){return function(t,e,n){var o=h.get_country(n.coords[1],n.coords[0]),r=(n["Total Confirmed"],n["Total Confirmed"]/1e3<10?"":"K"),c=n["Total Confirmed"]/1e3<10?n["Total Confirmed"]:n["Total Confirmed"]/1e3,i=Object(f.jsxs)("small",{children:[Object(f.jsx)("b",{children:o?"".concat(o.name+" : "):""})," ",c.toFixed(2)+r+" average confirmed cases per day"]});document.getElementById("tooltip"),u({showing:!0,positionX:t.pageX,positionY:t.pageY,message:i})}(e,0,t)},onMouseOut:function(){return document.getElementById("tooltip"),void u({showing:!1})}})}))}),[c])]})})},x=function(t){return t["Total Confirmed"]},g=function(t){var e=t.data,n=(t.filteredData,t.worldAtlas),r=t.setTooltip,c=t.processedData,i=Object(o.useMemo)((function(){return Object(u.l)().domain([1,Object(u.j)(e,x)]).range([1,32])}),[e,x,32]);return Object(f.jsx)(O,{worldAtlas:n,setTooltip:r,data:c,sizeScale:i,sizeValue:x})},p=function(t){var e=t.xScale,n=t.innerHeight,o=t.tickFormat,r=t.tickOffset,c=void 0===r?3:r;return e.ticks().map((function(t){return Object(f.jsxs)("g",{className:"tick",transform:"translate(".concat(e(t),",0)"),children:[Object(f.jsx)("line",{y2:n}),Object(f.jsx)("text",{style:{textAnchor:"middle"},dy:".71em",y:n+c,children:o(t)})]},t)}))},v=function(t){var e=t.yScale,n=t.innerWidth,o=t.tickOffset,r=void 0===o?3:o;return e.ticks().map((function(t){return Object(f.jsxs)("g",{className:"tick",transform:"translate(0,".concat(e(t),")"),children:[Object(f.jsx)("line",{x2:n}),Object(f.jsx)("text",{style:{textAnchor:"end"},x:-r,dy:".32em",children:"".concat(t/1e6," M")},t)]})}))},y=function(t){var e=t.binnedData,n=t.xScale,o=t.yScale,r=t.tooltipFormat,c=t.innerHeight;return e.map((function(t){return Object(f.jsx)("rect",{className:"mark",x:n(t.x0),y:o(t.y),width:n(t.x1)-n(t.x0),height:c-o(t.y),children:Object(f.jsx)("title",{children:r(t.y)})})}))},C=0,S=30,w=20,T=45,D=Object(u.q)("%m/%d/%Y"),k=function(t){return t["Total Confirmed"]},_=function(t){var e=t.data,n=t.width,r=t.height,c=t.setBrushExtent,i=t.xValue,s=r-C-w,l=n-T-S,d=Object(o.useMemo)((function(){return Object(u.m)().domain(Object(u.d)(e,i)).range([0,l])}),[e,i,l]),j=Object(o.useMemo)((function(){var t=d.domain(),n=Object(a.a)(t,2),o=n[0],r=n[1];return Object(u.h)().value(i).domain(d.domain()).thresholds(Object(u.p)(o,r))(e).map((function(t){return{y:Object(u.o)(t,k),x0:t.x0,x1:t.x1}}))}),[i,k,d,e]),b=Object(o.useMemo)((function(){return Object(u.k)().domain([0,Object(u.j)(j,(function(t){return t.y}))]).range([s,0])}),[j,s]),m=Object(o.useRef)();return Object(o.useEffect)((function(){var t=Object(u.a)().extent([[0,0],[l,s]]);t(Object(u.n)(m.current)),t.on("brush end",(function(){c(u.c.selection&&u.c.selection.map(d.invert))}))}),[l,s]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("rect",{width:n,height:r,fill:"white"}),Object(f.jsxs)("g",{transform:"translate(".concat(T,",").concat(C,")"),children:[Object(f.jsx)(p,{xScale:d,innerHeight:s,tickFormat:D,tickOffset:5}),Object(f.jsx)("text",{className:"axis-label",textAnchor:"middle",transform:"translate(".concat(-30,",").concat(s/2,") rotate(-90)"),children:"Total Confirmed"}),Object(f.jsx)(v,{yScale:b,innerWidth:l,tickOffset:5}),Object(f.jsx)("text",{className:"axis-label",x:l/2,y:s+54,textAnchor:"middle",children:"Time"}),Object(f.jsx)(y,{binnedData:j,xScale:d,yScale:b,tooltipFormat:function(t){return t},circleRadius:2,innerHeight:s}),Object(f.jsx)("g",{ref:m})]})]})},M=n(18),E=function(t,e){return t&&e?(t.getTime()-e.getTime())/864e5+1:0},F=function(t,e){var n=function(t){var e=t.map((function(t){return t["Location Coordinates"]}));return Object(s.a)(new Set(e))}(t),o=Array(n.length).fill(void 0),r=E(e.end,e.start);return t.forEach((function(t,e){o[n.indexOf(t["Location Coordinates"])]?o[n.indexOf(t["Location Coordinates"])]["Total Confirmed"]+=t["Total Confirmed"]:o[n.indexOf(t["Location Coordinates"])]=t})),o.forEach((function(t,e){o[e]["Total Confirmed"]/=r})),o},N=function(t){var e,r=t.tooltip,c=t.setTooltip,i=t.brushExtent,a=t.setBrushExtent,s=t.data,u=t.worldAtlas,l=t.width,d=t.height,j=t.dateHistogramSize,b=t.xValue,m=t.formatDate,h=t.summedUpTotal,O=t.findSmallestDate,x=t.findHighestDate,g=(t.getChunkCount,t.getProcessedSingleChunk,t.getChunks,t.simplifyAndStoreData,t.ToolTip),p=t.getTypedValue,v=t.BubbleMap,y=t.DateHistogram,C=i?s.filter((function(t){var e=b(t);return e>i[0]&&e<i[1]})):s,S=Object(o.useMemo)((function(){return h(C)}),[C]),w=Object(o.useMemo)((function(){return O(C)}),[C]),T=Object(o.useMemo)((function(){return x(C)}),[C]),D=Object(o.useMemo)((function(){return E(T,w)}),[T,w]),k=Object(o.useMemo)((function(){return p(S,"total")}),[S]),_=Object(o.useMemo)((function(){return 0===D?0:p(S/D,"average")}),[S,D]),N=F(C,{start:w,end:T}),A=function(t,e){var n=t.map((function(t,e){return{index:e,number:t["Total Confirmed"]}}));return n.sort((function(t,e){return t.number-e.number})),n.slice(n.length-e).reverse().map((function(e){return t[e.index]}))}(N,10),I=n(87).country_reverse_geocoding(),L=A.map((function(t){return I.get_country(t.coords[1],t.coords[0])&&I.get_country(t.coords[1],t.coords[0]).name}));return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{style:(e={height:d-40,width:"content-fit",right:10,backgroundColor:"white",top:"10px",float:"right"},Object(M.a)(e,"width",270),Object(M.a)(e,"border","1px solid #ccc"),Object(M.a)(e,"borderRadius",20),Object(M.a)(e,"padding",20),Object(M.a)(e,"margin","auto"),Object(M.a)(e,"position","absolute"),e),children:[Object(f.jsx)("h2",{className:"title",children:"[DATA VIZ] COVID-19 CONFIRMED CASES"}),Object(f.jsx)("b",{children:"".concat(m(w)," - ").concat(m(T))}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("span",{style:{backgroundColor:"grey",color:"white",padding:3},children:"Total Confirmed cases"}),Object(f.jsx)("br",{}),Object(f.jsx)("div",{className:"count",style:{fontSize:32,fontWeight:"bold"},children:k}),Object(f.jsx)("br",{}),Object(f.jsx)("span",{style:{backgroundColor:"grey",color:"white",padding:3},children:"Average Confirmed cases per day"}),Object(f.jsx)("br",{}),Object(f.jsx)("div",{className:"count",style:{fontSize:32,fontWeight:"bold"},children:_}),Object(f.jsx)("br",{}),Object(f.jsx)("span",{style:{backgroundColor:"grey",color:"white",padding:3},children:"Ten countries with highest `average confirmed cases` in order"}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),L.map((function(t,e){return Object(f.jsxs)("div",{style:{color:"#333",paddingBottom:5,fontSize:14},children:[e+1,". ",t]})})),Object(f.jsx)("br",{}),Object(f.jsxs)("div",{style:{color:"#666"},children:["Data Source: ",Object(f.jsx)("a",{href:"https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv",children:"CSSEGISandData/COVID-19"})]})]}),r.showing&&Object(f.jsx)(g,{tooltip:r}),Object(f.jsx)("div",{style:{width:"fit-content"},children:Object(f.jsxs)("svg",{width:l,height:d,style:{border:"1px solid #ccc",borderRadius:20,margin:10},children:[Object(f.jsx)(v,{data:s,filteredData:C,worldAtlas:u,setTooltip:c,processedData:N}),Object(f.jsxs)("g",{transform:"translate(0, ".concat(d-j*d,")"),children:[Object(f.jsx)("text",{fontSize:"smaller",y:-5,x:20,children:"Select small intervals for relatively good performance"}),Object(f.jsx)(y,{data:s,width:l,height:j*d,setBrushExtent:a,xValue:b})]})]})})]})},A=function(t){return t["Reported Date"]},I=function(t){var e=new Intl.DateTimeFormat("en",{year:"numeric"}).format(t),n=new Intl.DateTimeFormat("en",{month:"short"}).format(t),o=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(t);return"".concat(n," ").concat(o,", ").concat(e)},L=function(t){return t.map((function(t){return t["Total Confirmed"]})).reduce((function(t,e){return t+e}),0)},B=function(t){var e;return t.forEach((function(t,n){(void 0===e||t["Reported Date"]<e)&&(e=t["Reported Date"])})),e},V=function(t){var e;return t.forEach((function(t,n){(void 0===e||t["Reported Date"]>e)&&(e=t["Reported Date"])})),e},z=function(t,e,n){var o=(e-t)/864e5,r=[Math.ceil(o/7),Math.ceil(o/30),Math.ceil(o/360)];return"w"===n?r[0]:"m"===n?r[1]:"y"===n?r[2]:void 0},H=function(t){var e=function(t){var e=t.map((function(t){return t["Location Coordinates"]}));return Object(s.a)(new Set(e))}(t),n=[];return t.forEach((function(t,o){n[e.indexOf(t["Location Coordinates"])]?n[e.indexOf(t["Location Coordinates"])]["Total Confirmed"]+=t["Total Confirmed"]:n[e.indexOf(t["Location Coordinates"])]=t})),n},R=function(t,e,n,o,r){var c;"w"===r?c=7:"m"===r?c=30:"y"===r&&(c=360);new Date(e- -1*o*c*24*60*60*1e3);var i=new Date(e- -1*(o+1)*c*24*60*60*1e3);i=i>n?n:i;var a=t.filter((function(t){return!0}));return H(a)},J=function(t,e,n,o){var r=z(e,n,o),c=[];return Array(r).fill(void 0).forEach((function(r,i){var a=R(t,e,n,i,o);c.push(a)})),c.flat(1)},P=function(t){var e=B(t),n=V(t),o=J(t,e,n,"m"),r=J(t,e,n,"w"),c=J(t,e,n,"y");return localStorage.setItem("month",JSON.stringify(o)),localStorage.setItem("week",JSON.stringify(r)),localStorage.setItem("year",JSON.stringify(c)),"completed"},Y=function(t){var e=t.tooltip;return Object(f.jsx)("div",{style:{position:"absolute",left:-150,top:e.positionY-60,backgroundColor:"white",marginLeft:e.positionX,border:"1px solid #ccc",padding:5,width:300},children:e.message})},W=function(t,e){var n=t/1e3<10?"":"K",o=t;return n=t/1e6<10?n:"M",o="B"===(n=t/1e9<10?n:"B")?(t/1e9).toFixed(2):"M"===n?(t/1e6).toFixed(2):"K"===n?(t/1e3).toFixed(2):"average"===e?t.toFixed(2):Math.round(t),"".concat(o," ").concat(n)},X=function(){var t=function(){var t=Object(o.useState)(null),e=Object(a.a)(t,2),n=e[0],r=e[1];return Object(o.useEffect)((function(){Object(u.i)("https://unpkg.com/world-atlas@2.0.2/countries-50m.json").then((function(t){var e=t.objects,n=e.countries,o=e.land;r({land:Object(l.a)(t,o),interiors:Object(l.b)(t,n,(function(t,e){return t!==e}))})}))}),[]),n}(),e=d(),n=Object(o.useState)(),r=Object(a.a)(n,2),c=r[0],i=r[1],s=Object(o.useState)({showing:!1,positionX:0,positionY:0,message:""}),j=Object(a.a)(s,2),b=j[0],m=j[1];return t&&e?Object(f.jsx)(N,{tooltip:b,setTooltip:m,brushExtent:c,setBrushExtent:i,data:e,worldAtlas:t,width:960,height:630,dateHistogramSize:.2,xValue:A,formatDate:I,summedUpTotal:L,findSmallestDate:B,findHighestDate:V,getChunkCount:z,compressChunk:H,getProcessedSingleChunk:R,getChunks:J,simplifyAndStoreData:P,ToolTip:Y,getTypedValue:W,BubbleMap:g,DateHistogram:_}):Object(f.jsx)("div",{class:"loader"})},G=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,272)).then((function(e){var n=e.getCLS,o=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),o(t),r(t),c(t),i(t)}))},K=n(71);K.a.initialize("UA-178394506-1"),K.a.pageview("Covid Page Hit!!"),i.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(X,{})}),document.getElementById("root")),G()}},[[271,1,2]]]);
//# sourceMappingURL=main.98851936.chunk.js.map